(window.webpackJsonp=window.webpackJsonp||[]).push([[35,11,13,16,26,34],{444:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(60),o=r(0),c=Object(o.j)("v-toolbar__title"),d=Object(o.j)("v-toolbar__items");n.a},445:function(e,t,r){"use strict";r.r(t);var n={props:{titulo_encabezado:{type:String,default:""}}},o=r(52),c=r(76),d=r.n(c),l=r(205),v=r(75),f=r(173),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{color:"#3480B8",dark:"",flat:""}},[n("v-card-title",{staticClass:"headline"},[n("v-img",{staticStyle:{"margin-right":"10px"},attrs:{src:r(446),height:"30px","max-width":"30px"}}),e._v("\n\n        "+e._s(e.titulo_encabezado)+"\n          ")],1)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VCard:l.a,VCardTitle:v.d,VImg:f.a})},446:function(e,t,r){e.exports=r.p+"img/perfil-twitter.c1bd859.png"},451:function(e,t,r){var content=r(452);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(20).default)("5c8fbe94",content,!0,{sourceMap:!1})},452:function(e,t,r){var n=r(19)(!1);n.push([e.i,".theme--light.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea{color:#fff}.theme--light.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea::-moz-placeholder{color:hsla(0,0%,100%,.5)}.theme--light.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea:-ms-input-placeholder{color:hsla(0,0%,100%,.5)}.theme--light.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea::placeholder{color:hsla(0,0%,100%,.5)}.theme--dark.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea{color:rgba(0,0,0,.87)}.theme--dark.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea::-moz-placeholder{color:rgba(0,0,0,.38)}.theme--dark.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea:-ms-input-placeholder{color:rgba(0,0,0,.38)}.theme--dark.v-textarea.v-text-field--solo-inverted.v-input--is-focused textarea::placeholder{color:rgba(0,0,0,.38)}.v-textarea textarea{align-self:stretch;flex:1 1 auto;line-height:1.75rem;max-width:100%;min-height:32px;outline:none;padding:0;width:100%}.v-textarea .v-text-field__prefix,.v-textarea .v-text-field__suffix{padding-top:2px;align-self:start}.v-textarea.v-text-field--box .v-text-field__prefix,.v-textarea.v-text-field--box textarea,.v-textarea.v-text-field--enclosed .v-text-field__prefix,.v-textarea.v-text-field--enclosed textarea{margin-top:24px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) textarea{margin-top:10px}.v-textarea.v-text-field--box.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--box.v-text-field--single-line:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--outlined:not(.v-input--dense) .v-label,.v-textarea.v-text-field--enclosed.v-text-field--single-line:not(.v-input--dense) .v-label{top:18px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense textarea,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__prefix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-text-field__suffix,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense textarea{margin-top:6px}.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--box.v-text-field--single-line.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--outlined.v-input--dense .v-input__prepend-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__append-outer,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-inner,.v-textarea.v-text-field--enclosed.v-text-field--single-line.v-input--dense .v-input__prepend-outer{align-self:flex-start;margin-top:8px}.v-textarea.v-text-field--solo{align-items:flex-start}.v-textarea.v-text-field--solo .v-input__control textarea{caret-color:auto}.v-textarea.v-text-field--solo .v-input__append-inner,.v-textarea.v-text-field--solo .v-input__append-outer,.v-textarea.v-text-field--solo .v-input__prepend-inner,.v-textarea.v-text-field--solo .v-input__prepend-outer{align-self:flex-start;margin-top:12px}.v-application--is-ltr .v-textarea.v-text-field--solo .v-input__append-inner{padding-left:12px}.v-application--is-rtl .v-textarea.v-text-field--solo .v-input__append-inner{padding-right:12px}.v-textarea--auto-grow textarea{overflow:hidden}.v-textarea--no-resize textarea{resize:none}.v-textarea.v-text-field--enclosed .v-text-field__slot{align-self:stretch}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-right:-12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot{margin-left:-12px}.v-application--is-ltr .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-right:12px}.v-application--is-rtl .v-textarea.v-text-field--enclosed .v-text-field__slot textarea{padding-left:12px}",""]),e.exports=n},466:function(e,t,r){"use strict";r(11),r(12),r(10),r(5),r(15),r(13),r(16);var n=r(2),o=(r(25),r(66),r(451),r(464)),c=r(9);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var l=Object(c.a)(o.a);t.a=l.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(e){return!isNaN(parseFloat(e))}},rows:{type:[Number,String],default:5,validator:function(e){return!isNaN(parseInt(e,10))}}},computed:{classes:function(){return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},o.a.options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{autoGrow:function(e){var t=this;this.$nextTick((function(){var r;e?t.calculateInputHeight():null==(r=t.$refs.input)||r.style.removeProperty("height")}))},lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var e=this;setTimeout((function(){e.autoGrow&&e.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var input=this.$refs.input;if(input){input.style.height="0";var e=input.scrollHeight,t=parseInt(this.rows,10)*parseFloat(this.rowHeight);input.style.height=Math.max(t,e)+"px"}},genInput:function(){var input=o.a.options.methods.genInput.call(this);return input.tag="textarea",delete input.data.attrs.type,input.data.attrs.rows=this.rows,input},onInput:function(e){o.a.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},469:function(e,t,r){"use strict";r.r(t);var n=r(21),o=(r(64),r(176),r(5),r(77),r(118)),c={data:function(){return{selectedId:-1,dialogConfirm:!1,confirmTitle:"",confirmMensj:"",depSelect:[{departamento:"",departamento_corto:""}],search:"",dialog:!1,dialogDelete:!1,headers:[{text:"Departamento",align:"start",sortable:!1,value:"departamento"},{text:"Nombre corto",value:"departamento_corto"},{text:"Acciones",value:"acciones",sortable:!1}],editedIndex:-1,editedItem:{departamento:"",departamento_corto:""},defaultItem:{departamento:"",departamento_corto:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo departamento":"Editar departamento"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},methods:{editItem:function(e){this.editedIndex=this.departamentos.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.departamentos.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){this.delDepartamento(),this.departamentos.splice(this.editedIndex,1),this.closeDelete()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){this.editedIndex>-1?this.updateDepartamento():this.addDepartamento(),this.close()},addDepartamento:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.editedItem,n=e.$store.state.usuario.access_token,t.next=4,o.a.postCrearDepartamento(r,n);case 4:201==t.sent.status?(e.confirmTitle="Añadir departamento",e.confirmMensj="Departamento añadido con éxito",e.dialogConfirm=!0,e.$parent.cargarDepartamentos()):e.errorMsg();case 6:case"end":return t.stop()}}),t)})))()},updateDepartamento:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.editedItem,n=e.$store.state.usuario.access_token,t.next=4,o.a.postUpdateDepartamento(r,n);case 4:201==t.sent.status?(e.confirmTitle="Mdificar departamento",e.confirmMensj="Departamento modificado con éxito",e.dialogConfirm=!0,e.$parent.cargarDepartamentos()):e.errorMsg();case 6:case"end":return t.stop()}}),t)})))()},delDepartamento:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.editedItem,n=e.$store.state.usuario.access_token,t.next=4,o.a.postDelDepartamento(r,n);case 4:201==t.sent.status?(e.confirmTitle="Eliminar departamento",e.confirmMensj="Departamento eliminado",e.dialogConfirm=!0,e.$parent.cargarDepartamentos(),e.$parent.updateTitulo("")):e.errorMsg();case 6:case"end":return t.stop()}}),t)})))()},filtroBuscar:function(e,t,r){return t=t.toLowerCase(),t=removeAccents(t),null!=e&&null!=t&&"string"==typeof e&&-1!==removeAccents(e).toString().toLowerCase().indexOf(t)},clic:function(e){this.$parent.updateTitulo(e.departamento),this.$parent.cargarProfDep(e.id_departamento),this.$parent.updateDepID(e.id_departamento)},cerrarConfirm:function(){this.dialogConfirm=!1},errorMsg:function(){this.confirmTitle="Error",this.confirmMensj="Se ha producido un error.",this.dialogConfirm=!0}},props:{titulo:{type:String,default:""},loadingBar:{default:"true"},departamentos:{type:Array,default:[{departamento:"",departamento_corto:""}]}}},d=r(52),l=r(76),v=r.n(l),f=r(435),m=r(232),x=r(205),_=r(75),h=r(610),I=r(442),k=r(615),D=r(532),C=r(204),w=r(611),j=r(440),O=r(464),$=r(60),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("v-app",{staticStyle:{"background-color":"#3480B8"},attrs:{id:"inspire"}},[r("v-card",{staticClass:"mx-auto rounded-xl",staticStyle:{"margin-bottom":"20px"},attrs:{light:"",elevation:"24"}},[r("v-card-title",[e._v("\n        "+e._s(e.titulo)+"\n      ")]),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.departamentos,search:e.search,"custom-filter":e.filtroBuscar,"item-key":"departamento",height:"500px",loading:e.loadingBar,"loading-text":"Cargando datos..."},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:""}},[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),r("v-spacer"),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[r("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),n),[e._v("\n                Insertar\n              ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Departamento"},model:{value:e.editedItem.departamento,callback:function(t){e.$set(e.editedItem,"departamento",t)},expression:"editedItem.departamento"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Dep. corto"},model:{value:e.editedItem.departamento_corto,callback:function(t){e.$set(e.editedItem,"departamento_corto",t)},expression:"editedItem.departamento_corto"}})],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("\n                  Cancelar\n                ")]),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("\n                  Aceptar\n                ")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Eliminar")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-card-subtitle",{staticClass:"headline"},[e._v("¿Estás seguro de eliminar el departamento?")]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancelar")]),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("Aceptar")]),e._v(" "),r("v-spacer")],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogConfirm,callback:function(t){e.dialogConfirm=t},expression:"dialogConfirm"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(e._s(e.confirmTitle))]),e._v(" "),r("v-spacer"),e._v(" "),r("v-card-subtitle",{staticClass:"headline"},[e._v(e._s(e.confirmMensj))]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.cerrarConfirm}},[e._v("Aceptar")]),e._v(" "),r("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.departamento",fn:function(t){var n=t.item;return[r("tr",{on:{click:function(t){return e.clic(n)}}},[r("td",[e._v(e._s(n.departamento))])])]}},{key:"item.departamento_corto",fn:function(t){var n=t.item;return[r("tr",{on:{click:function(t){return e.clic(n)}}},[r("td",[e._v(e._s(n.departamento_corto))])])]}},{key:"item.acciones",fn:function(t){var n=t.item;return[r("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(n)}}},[e._v("\n          mdi-pencil\n        ")]),e._v(" "),r("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(n)}}},[e._v("\n          mdi-delete\n        ")])]}},{key:"no-data",fn:function(){},proxy:!0}]),model:{value:e.depSelect,callback:function(t){e.depSelect=t},expression:"depSelect"}})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;v()(component,{VApp:f.a,VBtn:m.a,VCard:x.a,VCardActions:_.a,VCardSubtitle:_.b,VCardText:_.c,VCardTitle:_.d,VCol:h.a,VContainer:I.a,VDataTable:k.a,VDialog:D.a,VIcon:C.a,VRow:w.a,VSpacer:j.a,VTextField:O.a,VToolbar:$.a})},470:function(e,t,r){"use strict";r.r(t);var n=r(21),o=(r(64),r(176),r(5),r(77),r(118)),c={data:function(){return{dialog:!1,dialogConfirm:!1,confirmTitle:"",confirmMensj:"",search:"",dialogDelete:!1,headers:[{text:"Profesor",align:"start",sortable:!1,value:"nombre_completo"},{text:"Rol",value:"rol"},{text:"Quitar profesor",value:"acciones",sortable:!1}],editedIndex:-1,editedItem:{id_profesor_departamento:null,id_profesor:null,id_departamento:null,id_rol:null,nombre_completo:"",rol:""},defaultItem:{id_profesor_departamento:null,id_profesor:null,id_departamento:null,id_rol:null,nombre_completo:"",rol:""}}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},methods:{editItem:function(e){this.editedIndex=this.prof_dep.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.prof_dep.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){this.delProfDep(),this.prof_dep.splice(this.editedIndex,1),this.closeDelete()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){this.editedIndex>-1?this.updateProfDep():this.addProfDep(),this.close()},addProfDep:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.editedItem.id_departamento=e.id_departamento,r=e.editedItem,n=e.$store.state.usuario.access_token,t.next=5,o.a.postCrearProfDep(r,n);case 5:201==t.sent.status?(e.confirmTitle="Añadir profesor",e.confirmMensj="Profesor/a añadido/a con éxito",e.dialogConfirm=!0,e.$parent.cargarProfDep(e.id_departamento)):e.errorMsg();case 7:case"end":return t.stop()}}),t)})))()},updateProfDep:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.editedItem.id_departamento=e.id_departamento,r=e.editedItem,n=e.$store.state.usuario.access_token,t.next=5,o.a.postUpdateProfDep(r,n);case 5:201==t.sent.status?(e.confirmTitle="Editar profesor/a",e.confirmMensj="Profesor/a modificado/a con éxito",e.dialogConfirm=!0,e.$parent.cargarProfDep(e.id_departamento)):e.errorMsg();case 7:case"end":return t.stop()}}),t)})))()},delProfDep:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.editedItem.id_departamento=e.id_departamento,r=e.editedItem,n=e.$store.state.usuario.access_token,t.next=5,o.a.postDelProfDep(r,n);case 5:201==t.sent.status?(e.confirmTitle="Eliminar profesor/a",e.confirmMensj="Profesor/a eliminado/a",e.dialogConfirm=!0,e.$parent.cargarProfDep(e.id_departamento)):e.errorMsg();case 7:case"end":return t.stop()}}),t)})))()},filtroBuscar:function(e,t,r){return t=t.toLowerCase(),t=removeAccents(t),null!=e&&null!=t&&"string"==typeof e&&-1!==removeAccents(e).toString().toLowerCase().indexOf(t)},cerrarConfirm:function(){this.dialogConfirm=!1},errorMsg:function(){this.confirmTitle="Error",this.confirmMensj="Se ha producido un error.",this.dialogConfirm=!0}},props:{id_departamento:null,tit_dep:{type:String,default:""},prof_dep:{type:Array,default:[{id_profesor_departamento:null,id_profesor:null,nombre_completo:"",id_rol:null,rol:""}]},prof_nom:{type:Array,default:[{id_profesor:null,nombre_completo:""}]},prof_rol:{type:Array,default:[{id_rol:null,rol:""}]},loadingBarProf:{default:!1}}},d=r(52),l=r(76),v=r.n(l),f=r(435),m=r(232),x=r(205),_=r(75),h=r(610),I=r(442),k=r(615),D=r(532),C=r(204),w=r(611),j=r(567),O=r(440),$=r(60),R=r(444),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("v-app",{staticStyle:{"background-color":"#3480B8"},attrs:{id:"inspire"}},[r("v-card",{staticClass:"mx-auto rounded-xl",staticStyle:{"margin-bottom":"60px"},attrs:{light:"",elevation:"24"}},[r("v-card-title",[e._v("\n        "+e._s(e.tit_dep)+"\n      ")]),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.prof_dep,height:"500px",search:e.search,"custom-filter":e.filtroBuscar,loading:e.loadingBarProf,"loading-text":"Cargando datos..."},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:""}},[r("v-toolbar-title",[e._v("Profesores asignados")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[r("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),n),[e._v("\n                Asignar nuevo\n              ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Asignar profesor")])]),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-select",{attrs:{items:e.prof_nom,"item-text":"nombre_completo","item-value":"id_profesor",label:"Profesor"},model:{value:e.editedItem.id_profesor,callback:function(t){e.$set(e.editedItem,"id_profesor",t)},expression:"editedItem.id_profesor"}})],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-select",{attrs:{items:e.prof_rol,"item-text":"rol","item-value":"id_rol",label:"Rol"},model:{value:e.editedItem.id_rol,callback:function(t){e.$set(e.editedItem,"id_rol",t)},expression:"editedItem.id_rol"}})],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("\n                  Cancelar\n                ")]),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("\n                  Aceptar\n                ")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Eliminar")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-card-subtitle",{staticClass:"headline"},[e._v("¿Estás seguro de quitar al profesor?")]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancelar")]),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("Aceptar")]),e._v(" "),r("v-spacer")],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogConfirm,callback:function(t){e.dialogConfirm=t},expression:"dialogConfirm"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(e._s(e.confirmTitle))]),e._v(" "),r("v-spacer"),e._v(" "),r("v-card-subtitle",{staticClass:"headline"},[e._v(e._s(e.confirmMensj))]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.cerrarConfirm}},[e._v("Aceptar")]),e._v(" "),r("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.acciones",fn:function(t){var n=t.item;return[r("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(n)}}},[e._v("\n          mdi-pencil\n        ")]),e._v(" "),r("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(n)}}},[e._v("\n          mdi-delete\n        ")])]}},{key:"no-data",fn:function(){},proxy:!0}])})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;v()(component,{VApp:f.a,VBtn:m.a,VCard:x.a,VCardActions:_.a,VCardSubtitle:_.b,VCardText:_.c,VCardTitle:_.d,VCol:h.a,VContainer:I.a,VDataTable:k.a,VDialog:D.a,VIcon:C.a,VRow:w.a,VSelect:j.a,VSpacer:O.a,VToolbar:$.a,VToolbarTitle:R.a})},506:function(e,t,r){"use strict";r.r(t);var n=r(21),o=(r(64),r(445)),c=r(469),d=r(470),l=r(118),v={layout:"admin",data:function(){return{depID:null,loadingBar:!0,loadingBarProf:!1,departamentos:[],prof_dep:[],tit_dep:"",profesores:[],prof_rol:[]}},components:{Encabezado:o.default,Departamentos:c.default,ProfesorDepartamento:d.default},methods:{cargarDepartamentos:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.descargaDatosFail=!1,r=e.$store.state.usuario.access_token,t.next=4,l.a.getDepartamentos(r);case 4:200==(n=t.sent).status?(e.departamentos=n.data,e.loadingBar=!1):e.descargaDatosFail=!0;case 6:case"end":return t.stop()}}),t)})))()},cargarRoles:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.descargaDatosFail=!1,r=e.$store.state.usuario.access_token,t.next=4,l.a.getRoles(r);case 4:200==(n=t.sent).status?e.prof_rol=n.data:e.descargaDatosFail=!0;case 6:case"end":return t.stop()}}),t)})))()},cargarProfDep:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.loadingBarProf=!0,t.descargaDatosFail=!1,n=t.$store.state.usuario.access_token,r.next=5,l.a.getProfDep(e,n);case 5:200==(o=r.sent).status?(t.prof_dep=o.data,t.loadingBarProf=!1):t.descargaDatosFail=!0;case 7:case"end":return r.stop()}}),r)})))()},cargarProfesores:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.descargaDatosFail=!1,r=e.$store.state.usuario.access_token,t.next=4,l.a.getProfesores(r);case 4:200==(n=t.sent).status?(e.profesores=n.data,e.loadingBar=!1):e.descargaDatosFail=!0;case 6:case"end":return t.stop()}}),t)})))()},updateTitulo:function(e){this.tit_dep=e},updateDepID:function(e){this.depID=e}},created:function(){this.cargarDepartamentos(),this.cargarRoles(),this.cargarProfesores()}},f=r(52),m=r(76),x=r.n(m),_=r(610),h=r(611),component=Object(f.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container",staticStyle:{"background-color":"#3480B8"}},[r("Encabezado",{attrs:{titulo_encabezado:"Gestión CPIFP"}}),e._v(" "),r("v-row",[r("v-col",[r("Departamentos",{attrs:{titulo:"Departamentos",departamentos:e.departamentos,loadingBar:e.loadingBar}})],1),e._v(" "),r("v-col",[r("ProfesorDepartamento",{attrs:{prof_dep:e.prof_dep,prof_nom:e.profesores,prof_rol:e.prof_rol,tit_dep:e.tit_dep,id_departamento:e.depID,loadingBarProf:e.loadingBarProf},on:{updateTitulo:e.updateTitulo}})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;x()(component,{Encabezado:r(445).default,Departamentos:r(469).default,ProfesorDepartamento:r(470).default}),x()(component,{VCol:_.a,VRow:h.a})},508:function(e,t,r){"use strict";r.r(t);var n=r(21),o=(r(64),r(176),r(5),r(77),r(118)),c=(r(506),{data:function(){return{search:"",dialog:!1,dialogConfirm:!1,confirmTitle:"",confirmMensj:"",titAccion:"",textAccion:"",loadingBtn:!1,dialogDelete:!1,dialogCerrar:!1,selectEdificio:null,departamento:"",urgencia:"",edificios:[],select_ubi:[],tecnicos:[],inc_dep:[],id_rol:null,expanded:[],singleExpand:!1,id_profesor:null,aviso:{user:"",asunto:"",email:"",textoEmail:"",remitente:"Administrador"},headers:[{text:"Incidencia",align:"start",sortable:!1,value:"descripcion"},{text:"Departamento",value:"departamento"},{text:"Estado",value:"estado"},{text:"Urgencia",value:"urgencia"},{text:"Ubicación",value:"ubi_completa"},{text:"Fecha",value:"fecha"},{text:"Inicio reparación",value:"fecha_ini_rep"},{text:"Final reparación",value:"fecha_fin_rep"},{text:"Horas",value:"horas"},{text:"Acciones",value:"acciones",sortable:!1}],headers2:[{text:"Incidencia",align:"start",sortable:!1,value:"descripcion"},{text:"Descripción",value:"desc_tecnica"},{text:"Departamento",value:"departamento"},{text:"Estado",value:"estado"},{text:"Urgencia",value:"urgencia"},{text:"Ubicación",value:"ubi_completa"},{text:"Observaciones",value:"observaciones"},{text:"Fecha",value:"fecha"},{text:"Inicio reparación",value:"fecha_ini_rep"},{text:"Final reparación",value:"fecha_fin_rep"},{text:"Horas",value:"horas"},{text:"Acciones",value:"acciones",sortable:!1}],editedIndex:-1,editedItem:{id_incidencia:"",id_profesor_crea:null,descripcion:"",desc_tecnica:"",id_estado:null,id_ubicacion:null,ubicacion:"",ubi_completa:"",id_edificio:null,edificio:"",observaciones:"",nivel_urgencia:null,fecha:"",fecha_ini_rep:null,fecha_fin_rep:null,horas:null,id_departamento:null,id_prof_modifica:null,id_tec_atiende:null,ProfMod:"",TecAtiende:""},defaultItem:{id_incidencia:"",id_profesor_crea:null,descripcion:"",desc_tecnica:"",id_estado:null,id_ubicacion:null,ubicacion:"",ubi_completa:"",id_edificio:null,edificio:"",observaciones:"",nivel_urgencia:null,fecha:"",fecha_ini_rep:null,fecha_fin_rep:null,horas:null,id_departamento:null,id_prof_modifica:null,id_tec_atiende:null,ProfMod:"",TecAtiende:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Nueva incidencia":"Editar incidencia"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},methods:{editItem:function(e){this.cargarUbicaciones(),this.editedIndex=this.incidencias.indexOf(e),this.editedItem=Object.assign({},e),this.selectEdificio=this.editedItem.id_edificio,this.dialog=!0},deleteItem:function(e){this.editedIndex=this.incidencias.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){this.delIncidencia(),this.incidencias.splice(this.editedIndex,1),this.closeDelete()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1})),this.resetInc()},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){this.editedIndex>-1?(Object.assign(this.incidencias[this.editedIndex],this.editedItem),this.updateIncidencia()):this.cargarDepartamento(this.editedItem.id_departamento).then(this.cargarUrgencia(this.editedItem.nivel_urgencia)).then(this.addIncidencia()),this.close()},addIncidencia:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,c,desc,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.editedItem.id_profesor_crea=e.$store.state.usuario.id_profesor,r=e.editedItem,n=e.$store.state.usuario.access_token,t.next=5,o.a.postCrearIncidencia(r,n);case 5:201==t.sent.status?(c=e.departamento,desc=r.descripcion,d=e.urgencia,e.avisar(c,desc,d),e.confirmTitle="Incidencia",e.confirmMensj="Incidencia creada con éxito",e.dialogConfirm=!0,e.$parent.cargarIncidencias()):e.errorMsg();case 7:case"end":return t.stop()}}),t)})))()},updateIncidencia:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.editedItem.id_prof_modifica=e.$store.state.usuario.id_profesor,r=e.editedItem,n=r.id_incidencia,c=e.$store.state.usuario.access_token,t.next=6,o.a.postUpdateIncidencia(r,c);case 6:201==t.sent.status?(1==r.id_estado&&e.reabrir(n,r,c),2==r.id_estado&&e.reprocesar(n,r,c),3==r.id_estado&&e.cerrar(n,r,c),e.confirmTitle="Incidencia",e.confirmMensj="Incidencia modificada",e.dialogConfirm=!0):e.errorMsg(),e.$parent.cargarIncidencias();case 9:case"end":return t.stop()}}),t)})))()},delIncidencia:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.editedItem,n=e.$store.state.usuario.access_token,t.next=4,o.a.postDelIncidencia(r,n);case 4:201==t.sent.status?(e.confirmTitle="Incidencia",e.confirmMensj="Incidencia eliminada",e.dialogConfirm=!0,e.$parent.cargarIncidencias()):e.errorMsg();case 6:case"end":return t.stop()}}),t)})))()},atender:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,c,d,l,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.editedItem.id_tec_atiende=e.$store.state.usuario.id_profesor,r={},n=e.editedItem.id_incidencia,c=e.editedItem.observaciones,d=e.editedItem.id_tec_atiende,l=e.$store.state.usuario.access_token,t.next=8,o.a.postAtiendeInc(n,c,d,r,l);case 8:v=t.sent,e.dialogCerrar=!1,201==v.status&&(e.$parent.cargarIncidencias(),e.resetInc());case 11:case"end":return t.stop()}}),t)})))()},reabrir:function(e,t,r){var c=this;return Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.postReabreInc(e,t,r);case 2:201==n.sent.status&&c.$parent.cargarIncidencias();case 4:case"end":return n.stop()}}),n)})))()},reprocesar:function(e,t,r){var c=this;return Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.postReproInc(e,t,r);case 2:201==n.sent.status&&c.$parent.cargarIncidencias();case 4:case"end":return n.stop()}}),n)})))()},cerrar:function(e,t,r){var c=this;return Object(n.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return 0,n.next=3,o.a.postCierraInc(e,0,t,r);case 3:201==n.sent.status&&(c.resetInc(),c.$parent.cargarIncidencias());case 5:case"end":return n.stop()}}),n)})))()},closeCerrar:function(){var e=this;this.dialogCerrar=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},accionIncidencia:function(e){1==e&&this.atender(),2==e&&this.cerrarInc()},cerrarInc:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,c,d,l,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={},n=e.editedItem.id_incidencia,c=e.editedItem.observaciones,d=e.editedItem.horas,l=e.$store.state.usuario.access_token,t.next=7,o.a.postCierraInc(n,c,d,r,l);case 7:v=t.sent,e.dialogCerrar=!1,201==v.status&&(e.resetInc(),e.$parent.cargarIncidencias());case 10:case"end":return t.stop()}}),t)})))()},btnIncidencia:function(e,t){if(this.loadingBtn=!0,this.editedIndex=this.incidencias.indexOf(t),this.editedItem=Object.assign({},t),"abierta"==e&&(this.titAccion="Atender",this.textAccion="¿Estás seguro de atender la incidencia?",this.dialogCerrar=!0,this.loadingBtn=!1),"procesando"==e&&(this.titAccion="Cerrar",this.textAccion="¿Estás seguro de cerrar la incidencia?",this.dialogCerrar=!0,this.loadingBtn=!1),"cerrada"==e)return this.loadingBtn=!1,void this.resetInc()},btnColor:function(e){return"abierta"==e?"green":"procesando"==e?"error":"cerrada"==e?"grey":void 0},btnText:function(e){return"abierta"==e?"atender":"procesando"==e?"cerrar":"cerrada"==e?"cerrada":void 0},btnEnabled:function(e){return"abierta"!=e&&("procesando"!=e&&("cerrada"==e||void 0))},cerrarConfirm:function(){this.dialogConfirm=!1},getColor:function(e){return"abierta"==e?"green":"procesando"==e?"orange":"red"},filtroBuscar:function(e,t,r){return t=t.toLowerCase(),t=removeAccents(t),null!=e&&null!=t&&"string"==typeof e&&-1!==removeAccents(e).toString().toLowerCase().indexOf(t)},errorMsg:function(){this.confirmTitle="Error",this.confirmMensj="Se ha producido un error.",this.dialogConfirm=!0},resetInc:function(){this.editedItem={id_incidencia:"",id_profesor_crea:"",descripcion:"",desc_tecnica:"",id_estado:null,id_ubicacion:null,ubicacion:null,id_edificio:null,edificio:"",nivel_urgencia:null,fecha:"",fecha_ini_rep:null,fecha_fin_rep:null,horas:null,id_departamento:null},this.selectEdificio=null},cargarEdificios:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.descargaDatosFail=!1,r=e.$store.state.usuario.access_token,t.next=4,o.a.getEdificios(r);case 4:200==(n=t.sent).status?e.edificios=n.data:e.descargaDatosFail=!0;case 6:case"end":return t.stop()}}),t)})))()},cargarAulas:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.dialog=!0,t.descargaDatosFail=!1,n=t.$store.state.usuario.access_token,r.next=5,o.a.getAulas(e,n);case 5:200==(c=r.sent).status?t.select_ubi=c.data:t.descargaDatosFail=!0;case 7:case"end":return r.stop()}}),r)})))()},cargarTecnicos:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.descargaDatosFail=!1,r=e.$store.state.usuario.access_token,t.next=4,o.a.getTecnicos(r);case 4:200==(n=t.sent).status?e.tecnicos=n.data:e.descargaDatosFail=!0;case 6:case"end":return t.stop()}}),t)})))()},cargarUbicaciones:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.descargaDatosFail=!1,r=e.$store.state.usuario.access_token,t.next=4,o.a.getUbicaciones(r);case 4:200==(n=t.sent).status?e.select_ubi=n.data:e.descargaDatosFail=!0;case 6:case"end":return t.stop()}}),t)})))()},avisar:function(e,desc,t){for(var r in this.tecnicos)this.crearAviso(this.tecnicos[r].email,e,desc,t);this.aviso.email=""},crearAviso:function(e,t,desc,r){var c=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var d,l,v,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d=c.$store.state.usuario.nombre_completo,l=new Date,c.aviso.email=e,c.aviso.asunto="Nueva incidencia en: "+t,c.aviso.textoEmail=d+" ha creado una nueva incidencia el día: "+l.toLocaleDateString()+".<br><br>Incidencia: "+desc+".<br><br>Nivel de urgencia: "+r+".",v=c.aviso,f=c.$store.state.usuario.access_token,n.next=9,o.a.postEnviarMail(v,f);case 9:200==n.sent.status||console.log("Error");case 11:case"end":return n.stop()}}),n)})))()},selectUbi:function(){this.cargarAulas(this.selectEdificio)},cargaRol:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$store.state.usuario.id_profesor,n=e.$store.state.usuario.access_token,e.descargaDatosFail=!1,t.next=5,o.a.getRol(r,n);case 5:200==(c=t.sent).status?(e.id_rol=c.data.id_rol,e.cargarDepartamentos(r)):e.descargaDatosFail=!0;case 7:case"end":return t.stop()}}),t)})))()},cargaIdProfesor:function(){this.id_profesor=this.$store.state.usuario.id_profesor},cargarDepartamentos:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.descargaDatosFail=!1,r=e.$store.state.usuario.access_token,30!=e.id_rol){t.next=10;break}return n=e.$store.state.usuario.id_profesor,t.next=6,o.a.getDepartamentosById(n,r);case 6:200==(c=t.sent).status?(e.inc_dep=c.data,e.loadingBar=!1):e.descargaDatosFail=!0,t.next=14;break;case 10:return t.next=12,o.a.getDepartamentos(r);case 12:200==(d=t.sent).status?(e.inc_dep=d.data,e.loadingBar=!1):e.descargaDatosFail=!0;case 14:case"end":return t.stop()}}),t)})))()},cargarDepartamento:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.descargaDatosFail=!1,n=t.$store.state.usuario.access_token,r.next=4,o.a.getDepartamento(e,n);case 4:200==(c=r.sent).status?t.departamento=c.data.departamento:t.descargaDatosFail=!0;case 6:case"end":return r.stop()}}),r)})))()},cargarUrgencia:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.descargaDatosFail=!1,n=t.$store.state.usuario.access_token,r.next=4,o.a.getUrgencia(e,n);case 4:200==(c=r.sent).status?t.urgencia=c.data.urgencia:t.descargaDatosFail=!0;case 6:case"end":return r.stop()}}),r)})))()}},created:function(){this.cargaIdProfesor(),this.cargaRol(),this.cargarEdificios(),this.cargarTecnicos()},props:{loadingBar:{default:"true"},login:{type:String,default:""},incidencias:{type:Array,default:[{id_incidencia:"",id_profesor_crea:null,descripcion:"",desc_tecnica:"",id_estado:null,id_ubicacion:null,id_edificio:null,edificio:"",ubicacion:"",ubi_completa:"",observaciones:"",nivel_urgencia:null,fecha:"",fecha_ini_rep:null,fecha_fin_rep:null,horas:"",id_departamento:null,id_prof_modifica:null,id_tec_atiende:null,ProfCrea:"",ProfMod:"",TecAtiende:""}]},select_est:{type:Array,default:[{id_estado:"",estado:""}]},select_urg:{type:Array,default:[{id_urgencia:"",urgencia:""}]}}}),d=r(52),l=r(76),v=r.n(l),f=r(232),m=r(205),x=r(75),_=r(561),h=r(610),I=r(442),k=r(615),D=r(532),C=r(204),w=r(611),j=r(567),O=r(440),$=r(464),R=r(466),y=r(60),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-row",["root"==e.login||e.id_rol>20?r("v-card",{staticClass:"mx-auto rounded-xl",staticStyle:{"margin-bottom":"60px"},attrs:{light:"",elevation:"24"}},[r("v-card-title",[e._v("\n          Incidencias\n      ")]),e._v(" "),r("v-data-table",{staticClass:"mx-auto",attrs:{"calculate-width":"",headers:e.headers,items:e.incidencias,search:e.search,"custom-filter":e.filtroBuscar,loading:e.loadingBar,"loading-text":"Cargando datos...",expanded:e.expanded,"single-expand":e.singleExpand,"show-expand":"","item-key":"descripcion"},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:""}},[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),r("v-spacer"),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[r("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),n),[e._v("\n                Insertar\n              ")])]}}],null,!1,2428388694),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{outlined:"",label:"Incidencia"},model:{value:e.editedItem.descripcion,callback:function(t){e.$set(e.editedItem,"descripcion",t)},expression:"editedItem.descripcion"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-textarea",{attrs:{outlined:"",label:"Descripción técnica"},model:{value:e.editedItem.desc_tecnica,callback:function(t){e.$set(e.editedItem,"desc_tecnica",t)},expression:"editedItem.desc_tecnica"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-select",{attrs:{outlined:"",items:e.inc_dep,label:"Departamento","item-text":"departamento","item-value":"id_departamento"},model:{value:e.editedItem.id_departamento,callback:function(t){e.$set(e.editedItem,"id_departamento",t)},expression:"editedItem.id_departamento"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[-1!=e.editedIndex&&30!=e.id_rol?r("v-select",{attrs:{outlined:"",items:e.select_est,label:"Estado","item-text":"estado","item-value":"id_estado"},model:{value:e.editedItem.id_estado,callback:function(t){e.$set(e.editedItem,"id_estado",t)},expression:"editedItem.id_estado"}}):e._e(),e._v(" "),r("v-select",{attrs:{outlined:"",items:e.select_urg,label:"Urgencia","item-text":"urgencia","item-value":"id_urgencia"},model:{value:e.editedItem.nivel_urgencia,callback:function(t){e.$set(e.editedItem,"nivel_urgencia",t)},expression:"editedItem.nivel_urgencia"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-select",{attrs:{outlined:"",items:e.edificios,label:"Edificio","item-text":"edificio","item-value":"id_edificio"},on:{change:function(t){return e.selectUbi(e.edificios.id_edificio)}},model:{value:e.selectEdificio,callback:function(t){e.selectEdificio=t},expression:"selectEdificio"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-select",{attrs:{outlined:"",items:e.select_ubi,label:"Ubicación","item-text":"ubicacion","item-value":"id_ubicacion"},model:{value:e.editedItem.id_ubicacion,callback:function(t){e.$set(e.editedItem,"id_ubicacion",t)},expression:"editedItem.id_ubicacion"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[e.editedItem.id_estado>1?r("v-textarea",{attrs:{outlined:"",label:"Observaciones"},model:{value:e.editedItem.observaciones,callback:function(t){e.$set(e.editedItem,"observaciones",t)},expression:"editedItem.observaciones"}}):e._e()],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("\n                  Cancelar\n                ")]),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("\n                  Aceptar\n                ")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogCerrar,callback:function(t){e.dialogCerrar=t},expression:"dialogCerrar"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(e._s(e.titAccion))]),e._v(" "),r("v-spacer"),e._v(" "),r("v-card-subtitle",{staticClass:"headline"},[e._v(e._s(e.textAccion))]),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-textarea",{attrs:{outlined:"",label:"Observaciones"},model:{value:e.editedItem.observaciones,callback:function(t){e.$set(e.editedItem,"observaciones",t)},expression:"editedItem.observaciones"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[2==e.editedItem.id_estado?r("v-text-field",{attrs:{outlined:"",label:"Horas"},model:{value:e.editedItem.horas,callback:function(t){e.$set(e.editedItem,"horas",t)},expression:"editedItem.horas"}}):e._e()],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeCerrar}},[e._v("Cancelar")]),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.accionIncidencia(e.editedItem.id_estado)}}},[e._v("Aceptar")]),e._v(" "),r("v-spacer")],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Eliminar")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-card-subtitle",{staticClass:"headline"},[e._v("¿Estás seguro de eliminar la incidencia?")]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancelar")]),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("Aceptar")]),e._v(" "),r("v-spacer")],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogConfirm,callback:function(t){e.dialogConfirm=t},expression:"dialogConfirm"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v(e._s(e.confirmTitle))]),e._v(" "),r("v-spacer"),e._v(" "),r("v-card-subtitle",{staticClass:"headline"},[e._v(e._s(e.confirmMensj))]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.cerrarConfirm}},[e._v("Aceptar")]),e._v(" "),r("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.estado",fn:function(t){var n=t.item;return[r("v-chip",{attrs:{color:e.getColor(n.estado),dark:""}},[e._v("\n          "+e._s(n.estado)+"\n        ")])]}},"root"==e.login||30==e.id_rol||40==e.id_rol||50==e.id_rol?{key:"item.acciones",fn:function(t){var n=t.item;return["root"==e.login||40==e.id_rol||30==e.id_rol&&1==n.id_estado||50==e.id_rol&&1==n.id_estado?r("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(n)}}},[e._v("\n          mdi-pencil\n        ")]):e._e(),e._v(" "),"root"==e.login||40==e.id_rol||30==e.id_rol&&1==n.id_estado||50==e.id_rol&&1==n.id_estado?r("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(n)}}},[e._v("\n          mdi-delete\n        ")]):e._e(),e._v(" "),"root"!=e.login&&20==e.id_rol||"root"!=e.login&&40==e.id_rol?r("v-btn",{attrs:{"x-small":"",dark:"",loading:e.loadingBtn,color:e.btnColor(n.estado)},on:{click:function(t){return e.btnIncidencia(n.estado,n)}}},[e._v("\n          "+e._s(e.btnText(n.estado))+"\n            \n        ")]):e._e()]}}:null,{key:"expanded-item",fn:function(t){t.headers;var n=t.item;return[r("td",{attrs:{colspan:2}},[e._v("\n          Descripción: "+e._s(n.desc_tecnica)+"\n        ")]),e._v(" "),r("td",{attrs:{colspan:3}},[e._v("\n          Observaciones: "+e._s(n.observaciones)+"\n        ")]),e._v(" "),r("td",{attrs:{colspan:1}},[e._v("\n          Creada por: "+e._s(n.ProfCrea)+"\n        ")]),e._v(" "),r("td",{attrs:{colspan:2}},[e._v("\n          Últ. modificación: "+e._s(n.ProfMod)+"\n        ")]),e._v(" "),r("td",{attrs:{colspan:1}},[e._v("\n          Atiende: "+e._s(n.TecAtiende)+"\n        ")])]}}],null,!0)})],1):e._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports;v()(component,{VBtn:f.a,VCard:m.a,VCardActions:x.a,VCardSubtitle:x.b,VCardText:x.c,VCardTitle:x.d,VChip:_.a,VCol:h.a,VContainer:I.a,VDataTable:k.a,VDialog:D.a,VIcon:C.a,VRow:w.a,VSelect:j.a,VSpacer:O.a,VTextField:$.a,VTextarea:R.a,VToolbar:y.a})},627:function(e,t,r){"use strict";r.r(t);var n=r(21),o=(r(64),r(445)),c=r(508),d=r(118),l={layout:"admin",data:function(){return{loadingBar:!0,login:"root",id_rol:null,incidencias:[],select_est:[],select_urg:[]}},components:{Encabezado:o.default,Incidencias:c.default},methods:{cargarIncidencias:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.descargaDatosFail=!1,r=e.$store.state.usuario.access_token,t.next=4,d.a.getIncidencias(r);case 4:200==(n=t.sent).status?(e.incidencias=n.data,e.loadingBar=!1):e.descargaDatosFail=!0;case 6:case"end":return t.stop()}}),t)})))()},cargarSelUrgencias:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.descargaDatosFail=!1,r=e.$store.state.usuario.access_token,t.next=4,d.a.urgencias(r);case 4:200==(n=t.sent).status?e.select_urg=n.data:e.descargaDatosFail=!0;case 6:case"end":return t.stop()}}),t)})))()},cargarSelEstados:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.descargaDatosFail=!1,r=e.$store.state.usuario.access_token,t.next=4,d.a.estados(r);case 4:200==(n=t.sent).status?e.select_est=n.data:e.descargaDatosFail=!0;case 6:case"end":return t.stop()}}),t)})))()},cargarDepartamentos:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.descargaDatosFail=!1,r=e.$store.state.usuario.access_token,t.next=4,d.a.getDepartamentos(r);case 4:200==(n=t.sent).status?(e.inc_dep=n.data,e.loadingBar=!1):e.descargaDatosFail=!0;case 6:case"end":return t.stop()}}),t)})))()},cargarUbicaciones:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.descargaDatosFail=!1,r=e.$store.state.usuario.access_token,t.next=4,d.a.getUbicaciones(r);case 4:200==(n=t.sent).status?(e.select_ubi=n.data,e.loadingBar=!1):e.descargaDatosFail=!0;case 6:case"end":return t.stop()}}),t)})))()},cargaRol:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$store.state.usuario.id_profesor,n=e.$store.state.usuario.access_token,e.descargaDatosFail=!1,t.next=5,d.a.getRol(r,n);case 5:200==(o=t.sent).status?e.id_rol=o.data.id_rol:e.descargaDatosFail=!0;case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.cargarIncidencias(),this.cargarSelUrgencias(),this.cargarSelEstados(),this.cargarDepartamentos(),this.cargaRol()}},v=r(52),component=Object(v.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container",staticStyle:{"background-color":"#3480B8"}},[r("Encabezado",{attrs:{titulo_encabezado:"Gestión mantenimiento"}}),e._v(" "),r("Incidencias",{attrs:{incidencias:e.incidencias,select_est:e.select_est,select_urg:e.select_urg,loadingBar:e.loadingBar,login:e.login,id_rol:e.id_rol}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Encabezado:r(445).default,Incidencias:r(508).default})}}]);