(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{453:function(t,e,r){var content=r(458);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(20).default)("7790c0f7",content,!0,{sourceMap:!1})},454:function(t,e,r){"use strict";r.r(e);var n=r(21),o=(r(64),r(5),r(66),r(65),r(59),r(53),r(54),r(39),r(118)),c={name:"app",props:["permiso","profesor"],data:function(){return{uploadedFiles:[],uploadError:null,currentStatus:null}},computed:{isInitial:function(){return 0===this.currentStatus},isSaving:function(){return 1===this.currentStatus},isSuccess:function(){return 2===this.currentStatus},isFailed:function(){return 3===this.currentStatus}},methods:{wait:function(t){return function(e){return new Promise((function(r){return setTimeout((function(){return r(e)}),t)}))}},reset:function(){this.currentStatus=0,this.uploadedFiles=[],this.uploadError=null},save:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var data,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.currentStatus=1,(data=new FormData(document.getElementById("form-archivos"))).append("id_permiso",e.permiso.id_permiso),data.append("id_profesor",e.permiso.id_profesor),t.next=6,o.a.postSubirArchivos(data).then(e.wait(1500));case 6:200==(r=t.sent).status?(e.currentStatus=0,e.permiso.archivos=r.data):(e.uploadError=r,e.currentStatus=3);case 8:case"end":return t.stop()}}),t)})))()},filesChange:function(t,e){var r=new FormData;e.length&&(Array.from(Array(e.length).keys()).map((function(n){r.append(t,e[n],e[n].name)})),this.save(r))}},mounted:function(){this.reset()}},l=(r(457),r(52)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"container"},[t.isInitial||t.isSaving?r("form",{attrs:{id:"form-archivos",enctype:"multipart/form-data",novalidate:""}},[r("h1",[t._v("Subir Documentos")]),t._v(" "),r("div",{staticClass:"dropbox"},[r("input",{staticClass:"input-file",attrs:{type:"file",multiple:"",name:"archivosSubidos[]"},on:{change:function(e){t.save("cualquiercosa"),t.fileCount=e.target.files.length}}}),t._v(" "),t.isInitial?r("p",[t._v("\n              Arrastra tus archivos aqu√≠"),r("br"),t._v(" o click para buscar\n          ")]):t._e(),t._v(" "),t.isSaving?r("p",[t._v("\n              Subiendo "+t._s(t.fileCount)+" archivos...\n          ")]):t._e()])]):t._e(),t._v(" "),t.isSuccess?r("div",[r("h2",[t._v("Uploaded "+t._s(t.uploadedFiles.length)+" file(s) successfully.")]),t._v(" "),r("p",[r("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.reset()}}},[t._v("Upload again")])]),t._v(" "),r("ul",{staticClass:"list-unstyled"},t._l(t.uploadedFiles,(function(t){return r("li",[r("img",{staticClass:"img-responsive img-thumbnail",attrs:{src:t.url,alt:t.originalName}})])})),0)]):t._e(),t._v(" "),t.isFailed?r("div",[r("h2",[t._v("Fallo en la carga de archivos.")]),t._v(" "),r("p",[r("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.reset()}}},[t._v("Intetalo de nuevo")])]),t._v(" "),r("pre",[t._v(t._s(t.uploadError))])]):t._e()])])}),[],!1,null,null,null);e.default=component.exports},457:function(t,e,r){"use strict";r(453)},458:function(t,e,r){var n=r(19)(!1);n.push([t.i,".dropbox{outline:2px dashed grey;outline-offset:-10px;background:#e0ffff;color:#696969;padding:10px;min-height:200px;position:relative;cursor:pointer}.input-file{opacity:0;width:100%;height:200px;position:absolute;cursor:pointer}.dropbox:hover{background:#add8e6}.dropbox p{font-size:1.2em;text-align:center;padding:50px 0}",""]),t.exports=n}}]);